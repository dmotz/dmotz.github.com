(function(){var e,t,n,o,r,l,u,a,c,i,d,m,s,f,g,h,p,v,w,y,E,I,S,L,N,B;e=Math.abs,E=Math.sqrt,m="ontouchstart"in window,r=2,f=o=B=i=0,v=[],N={transform:"transform"},I=t=p=null,S=document.createElement("div"),w="/works/",y=function(){return window.localStorage?(o=localStorage.getItem("n")||0,document.documentElement.className="color"+o,function(){return localStorage.setItem("n",o)}):function(){}}(),n=function(e){return e[0].toUpperCase()+e.slice(1)},c=function(){var e;return e=document.location.pathname,"/"===e?null:e.split(w)[1].replace("/","")},h=function(){var e;return(e=c())?(f=window.pageYOffset,t&&(t.className=""),console.log(c()),t=document.getElementById("content-"+c()),p.scrollTop=0,t.className="active",document.body.className="perma"):(window.scrollTo(0,f),document.body.className="")},d=function(e){return e.addEventListener("click",function(t){return t.preventDefault(),history.pushState(null,null,e.href),h()},!0)},l=function(){var e,t,n,o,r,l,u;for(e=r=0,l=I.length;l>r;e=++r)n=I[e],u=n.getBoundingClientRect(),t=u.left,o=u.top,v[e]=[t,o];return null},a=function(){var e;return e=null,function(){return clearTimeout(e),e=setTimeout(l,333)}}(),u=10,g=function(t){var n,o,r,l,a,c,d,m,s;for(l=m=0,s=I.length;s>m;l=++m)d=I[l],n=t.pageX-v[l][0]-B/2,o=t.pageY-v[l][1]-i/2,r=E(Math.pow(e(n),2)+Math.pow(e(o),2)),c=n/((r||1)/u),a=-o/((r||1)/u),d.children[0].style[N.transform]="rotateX("+a+"deg) rotateY("+c+"deg)";return null};for(s in N)L=N[s],N[s]=function(){var e,t,o,r,l;for(l=["Webkit","Moz","ms"],o=0,r=l.length;r>o;o++)if(t=l[o],(e=t+n(L))in S.style)return e;return L in S.style?L:null}();document.addEventListener("DOMContentLoaded",function(){var e,t,n,u,s;if(t=m?" touch":"",setTimeout(function(){return document.documentElement.className="color"+o+t},0),I=document.getElementById("grid").children,p=document.getElementById("perma"),B=i=parseInt(window.getComputedStyle(I[0]).width,10),document.getElementById("email").href=["m","a","i","l","t","o",":","d","a","n","@","o","x","i","s","m",".","c","o","m"].join(""),setInterval(function(){return++o>r&&(o=0),document.documentElement.className="color"+o+t,y()},8e3),!m){if(document.addEventListener("keydown",function(e){return 27===e.keyCode&&c()?(history.pushState(null,null,"/"),h()):void 0}),!N.transform)return;l(),window.addEventListener("resize",a),document.addEventListener("mousemove",g,!1)}if(window.history.pushState){for(h(),s=document.querySelectorAll("#grid > a"),n=0,u=s.length;u>n;n++)e=s[n],d(e);return d(document.getElementById("x")),addEventListener("popstate",h)}},!1)}).call(this);
//# sourceMappingURL=oxism.js.map