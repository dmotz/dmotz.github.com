{"version":3,"sources":["oxism.coffee"],"names":[],"mappings":"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","file":"oxism.js","sourcesContent":["{abs, sqrt}   = Math\nisTouchScreen = 'ontouchstart' of window\ncolors        = 2\nlastY         = colorN = w = h = 0\npositions     = []\nvendor        = transform: 'transform'\nsquares       = activeContent = permaDiv = null\ntestEl        = document.createElement 'div'\n\n\nsaveColor = do ->\n  if window.localStorage\n    colorN = localStorage.getItem('n') or 0\n    document.documentElement.className = 'color' + colorN\n    ->\n      localStorage.setItem 'n', colorN\n  else\n    ->\n\n\ncapitalize = (s) ->\n  s[0].toUpperCase() + s[1...]\n\n\nnavHash = ->\n  hash = location.hash[1...]\n  if hash is ''\n    window.scrollTo 0, lastY\n    return document.body.className = ''\n\n  lastY = window.pageYOffset\n  activeContent.className = '' if activeContent\n  activeContent = document.getElementById 'content-' + hash\n  permaDiv.scrollTop      = 0\n  activeContent.className = 'active'\n  document.body.className = 'perma'\n\n\ncomputePositions = ->\n  for square, i in squares\n    {left, top}  = square.getBoundingClientRect()\n    positions[i] = [left, top]\n  null\n\n\ndebouncer = do ->\n  timer = null\n  ->\n    clearTimeout timer\n    timer = setTimeout computePositions, 333\n\n\ndampen = 10\n\nonMove = (e) ->\n  for square, i in squares\n    dX   = e.pageX - positions[i][0] - w / 2\n    dY   = e.pageY - positions[i][1] - h / 2\n    dist = sqrt abs(dX) ** 2 + abs(dY) ** 2\n    rY   =  dX / ((dist or 1) / dampen)\n    rX   = -dY / ((dist or 1) / dampen)\n    square.children[0].style[vendor.transform] = \"rotateX(#{ rX }deg) rotateY(#{ rY }deg)\"\n\n  null\n\n\nfor key, val of vendor\n  vendor[key] = do ->\n    for prefix in ['Webkit', 'Moz', 'ms']\n      return full if (full = prefix + capitalize val) of testEl.style\n    return val if val of testEl.style\n    null\n\n\ndocument.addEventListener 'DOMContentLoaded', ->\n  touchClass = if isTouchScreen then ' touch' else ''\n  setTimeout (-> document.documentElement.className = 'color' + colorN + touchClass), 0\n  squares  = document.getElementById('grid').children\n  permaDiv = document.getElementById 'perma'\n  w    = h = parseInt window.getComputedStyle(squares[0]).width, 10\n\n  document.getElementById('email').href = ['m', 'a', 'i', 'l', 't', 'o', ':',\n                                           'd', 'a', 'n', '@', 'o', 'x', 'i',\n                                           's', 'm', '.', 'c', 'o', 'm'].join ''\n\n  setInterval ->\n    colorN = 0 if ++colorN > colors\n    document.documentElement.className = 'color' + colorN + touchClass\n    saveColor()\n  , 8000\n\n  unless isTouchScreen\n    document.addEventListener 'keydown', (e) -> location.hash = '' if e.keyCode is 27\n    return unless vendor.transform\n    computePositions()\n    window.addEventListener 'resize', debouncer\n    document.addEventListener 'mousemove', onMove, false\n\n  window.addEventListener 'hashchange', navHash\n  navHash()\n\n\n, false\n\n"],"sourceRoot":"/source/"}